set_ideas_up_at_start_effect = {
	if = {
		limit = {
			OR = {
				NOT = { has_country_flag = selected_idea_groups_array_set }
				check_variable = { national_ideas_id = 0 }
			}
		}
		set_country_flag = selected_idea_groups_array_set
		set_variable = { eu4_like_ideas_country_policy_cost = global.eu4_like_ideas_policy_cost }
		set_variable = { completed_national_ideas = 0 }
		set_variable = { until_next_completed_national_idea = 3 }
		swap_national_ideas_effect = yes
		clear_array = selected_idea_groups
		resize_array = { selected_idea_groups = 2 }
		if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_4
				}
			}
			resize_array = { selected_idea_groups = 4 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_6
				}
			}
			resize_array = { selected_idea_groups = 6 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_8
				}
			}
			resize_array = { selected_idea_groups = 8 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_10
				}
			}
			resize_array = { selected_idea_groups = 10 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_12
				}
			}
			resize_array = { selected_idea_groups = 12 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_14
				}
			}
			resize_array = { selected_idea_groups = 14 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_16
				}
			}
			resize_array = { selected_idea_groups = 16 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
			}
			resize_array = { selected_idea_groups = 18 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
			}
			resize_array = { selected_idea_groups = 20 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
			}
			resize_array = { selected_idea_groups = 22 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
			}
			resize_array = { selected_idea_groups = 24 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			resize_array = { selected_idea_groups = 26 }
		}
		clear_array = adm_idea_groups
		add_to_array = { adm_idea_groups = 1 }
		add_to_array = { adm_idea_groups = 2 }
		add_to_array = { adm_idea_groups = 3 }
		add_to_array = { adm_idea_groups = 4 }
		add_to_array = { adm_idea_groups = 5 }
		add_to_array = { adm_idea_groups = 6 }
		add_to_array = { adm_idea_groups = 19 }
		add_to_array = { adm_idea_groups = 22 }
		add_to_array = { adm_idea_groups = 25 }
		clear_array = dip_idea_groups
		add_to_array = { dip_idea_groups = 7 }
		add_to_array = { dip_idea_groups = 8 }
		add_to_array = { dip_idea_groups = 9 }
		add_to_array = { dip_idea_groups = 10 }
		add_to_array = { dip_idea_groups = 11 }
		add_to_array = { dip_idea_groups = 12 }
		add_to_array = { dip_idea_groups = 20 }
		add_to_array = { dip_idea_groups = 23 }
		add_to_array = { dip_idea_groups = 26 }
		clear_array = mil_idea_groups
		add_to_array = { mil_idea_groups = 13 }
		add_to_array = { mil_idea_groups = 14 }
		add_to_array = { mil_idea_groups = 15 }
		add_to_array = { mil_idea_groups = 16 }
		add_to_array = { mil_idea_groups = 17 }
		add_to_array = { mil_idea_groups = 18 }
		add_to_array = { mil_idea_groups = 21 }
		add_to_array = { mil_idea_groups = 24 }
		add_to_array = { mil_idea_groups = 27 }
	}
	update_idea_cost_modifiers = yes
	update_policy_costs = yes
}

swap_national_ideas_effect = {
	if = {
		limit = {
			NOT = { check_variable = { national_ideas_id = 0 } }
		}
		calculate_progress_of_national_ideas = yes
		clear_national_ideas = yes
		if = {
			limit = {
				NOT = { check_variable = { national_ideas_id = 1000 } }
				NOT = { has_country_flag = swap_to_previous_national_ideas }
			}
			set_variable = { previous_national_ideas_id = national_ideas_id }
		}
	}
	set_variable = { national_ideas_id = 1000 } # Generic Ideas
	if = {
		limit = {
			NOT = { has_country_flag = swap_to_generic_national_ideas }
			NOT = { has_country_flag = swap_to_previous_national_ideas }
			NOT = { has_country_flag = swap_to_custom_national_ideas }
		}
		if = {
			limit = {
				original_tag = GER
				NOT = { has_government = neutrality }
			}
			set_variable = { national_ideas_id = 1 }
		}
		if = {
			limit = {
				original_tag = USA
			}
			set_variable = { national_ideas_id = 2 }
		}
		if = {
			limit = {
				original_tag = ENG
			}
			set_variable = { national_ideas_id = 3 }
		}
		if = {
			limit = {
				original_tag = ITA
			}
			set_variable = { national_ideas_id = 4 }
		}
		if = {
			limit = {
				original_tag = SOV
			}
			set_variable = { national_ideas_id = 5 }
		}
		if = {
			limit = {
				original_tag = JAP
			}
			set_variable = { national_ideas_id = 6 }
		}
		if = {
			limit = {
				original_tag = FRA
			}
			set_variable = { national_ideas_id = 7 }
		}
		if = {
			limit = {
				original_tag = CAN
			}
			set_variable = { national_ideas_id = 8 }
		}
		if = {
			limit = {
				original_tag = PRC
				NOT = { has_cosmetic_tag = CHI_QING_EMPIRE }
			}
			set_variable = { national_ideas_id = 9 }
		}
		if = {
			limit = {
				original_tag = CHI
				NOT = { has_cosmetic_tag = CHI_QING_EMPIRE }
			}
			set_variable = { national_ideas_id = 10 }
		}
		if = {
			limit = {
				OR = {
					original_tag = GXC
					original_tag = YUN
					original_tag = SHX
					original_tag = XSM
					original_tag = SIK
				}
				NOT = { has_cosmetic_tag = CHI_QING_EMPIRE }
			}
			set_variable = { national_ideas_id = 11 }
		}
		if = {
			limit = {
				original_tag = POL
			}
			set_variable = { national_ideas_id = 12 }
		}
		if = {
			limit = {
				original_tag = GER
				has_government = neutrality
			}
			set_variable = { national_ideas_id = 13 }
		}
		if = {
			limit = {
				original_tag = GRE
				NOT = { has_cosmetic_tag = GRE_MACEDONIAN_EMPIRE }
			}
			set_variable = { national_ideas_id = 14 }
		}
		if = {
			limit = {
				original_tag = SPR
				NOT = { tag = SPC }
				NOT = { has_government = communism }
			}
			set_variable = { national_ideas_id = 15 }
		}
		if = {
			limit = {
				OR = {
					original_tag = MAN
					has_cosmetic_tag = CHI_QING_EMPIRE
					has_cosmetic_tag = QIN_formable
					AND = {
						has_start_date > 1910.4.30
						NOT = { has_start_date > 1933.1.1 }
						tag = QIN
					}
				}
			}
			set_variable = { national_ideas_id = 16 }
		}
		if = {
			limit = {
				has_cosmetic_tag = GRE_MACEDONIAN_EMPIRE
			}
			set_variable = { national_ideas_id = 17 }
		}
		if = {
			limit = {
				original_tag = ROM
			}
			set_variable = { national_ideas_id = 18 }
		}
		if = {
			limit = {
				original_tag = TUR
				NOT = { has_cosmetic_tag = OTT_UNIFIED }
				OR = {
					NOT = { has_start_date > 1910.4.30 }
					has_start_date > 1933.1.1
				}
			}
			set_variable = { national_ideas_id = 19 }
		}
		if = {
			limit = {
				OR = {
					has_cosmetic_tag = OTT_UNIFIED
					AND = {
						original_tag = TUR
						has_start_date > 1910.4.30
						NOT = { has_start_date > 1933.1.1 }
					}
				}
			}
			set_variable = { national_ideas_id = 20 }
		}
		if = {
			limit = {
				OR = {
					has_cosmetic_tag = HUN_EMPIRE
					AND = {
						has_start_date > 1910.4.30
						NOT = { has_start_date > 1933.1.1 }
						original_tag = AUH
					}
				}
			}
			set_variable = { national_ideas_id = 21 }
		}
		if = {
			limit = {
				original_tag = POR
			}
			set_variable = { national_ideas_id = 22 }
		}
		if = {
			limit = {
				original_tag = SWE
			}
			set_variable = { national_ideas_id = 23 }
		}
		if = {
			limit = {
				original_tag = HOL
			}
			set_variable = { national_ideas_id = 24 }
		}
		if = {
			limit = {
				original_tag = SAU
			}
			set_variable = { national_ideas_id = 25 }
		}
		if = {
			limit = {
				original_tag = SPR
				OR = {
					tag = SPC
					has_government = communism
				}
			}
			set_variable = { national_ideas_id = 26 }
		}

	}
	else_if = {
		limit = {
			has_country_flag = swap_to_previous_national_ideas
		}
		set_variable = { national_ideas_id = previous_national_ideas_id }
		clear_variable = previous_national_ideas_id
	}
	else_if = {
		limit = {
			has_country_flag = swap_to_custom_national_ideas
		}
		set_variable = { national_ideas_id = selected_custom_national_ideas_id }
	}
	complete_national_idea_0 = yes
	calculate_progress_of_national_ideas = yes
}

sort_selectable_adm_idea_groups = {
	for_loop_effect = {
		start = 1
		end = adm_idea_groups^num
		value = loop_value
		set_temp_variable = { var = j value = loop_value }
		set_temp_variable = { var = j_minus value = j }
		subtract_from_temp_variable = { var = j_minus value = 1 }
		while_loop_effect = {
			limit = {
				check_variable = { j > 0 }
				check_variable = { adm_idea_groups^j_minus > adm_idea_groups^j }
			}
			# swap j-1 with j if value of j-1 > j
			set_temp_variable = { var = temp value = adm_idea_groups^j }
			set_variable = { var = adm_idea_groups^j value = adm_idea_groups^j_minus }
			set_variable = { var = adm_idea_groups^j_minus value = temp }
			subtract_from_temp_variable = { var = j value = 1 }
			subtract_from_temp_variable = { var = j_minus value = 1 }
		}
	}
}

sort_selectable_dip_idea_groups = {
	for_loop_effect = {
		start = 1
		end = dip_idea_groups^num
		value = loop_value
		set_temp_variable = { var = j value = loop_value }
		set_temp_variable = { var = j_minus value = j }
		subtract_from_temp_variable = { var = j_minus value = 1 }
		while_loop_effect = {
			limit = {
				check_variable = { j > 0 }
				check_variable = { dip_idea_groups^j_minus > dip_idea_groups^j }
			}
			# swap j-1 with j if value of j-1 > j
			set_temp_variable = { var = temp value = dip_idea_groups^j }
			set_variable = { var = dip_idea_groups^j value = dip_idea_groups^j_minus }
			set_variable = { var = dip_idea_groups^j_minus value = temp }
			subtract_from_temp_variable = { var = j value = 1 }
			subtract_from_temp_variable = { var = j_minus value = 1 }
		}
	}
}

sort_selectable_mil_idea_groups = {
	for_loop_effect = {
		start = 1
		end = mil_idea_groups^num
		value = loop_value
		set_temp_variable = { var = j value = loop_value }
		set_temp_variable = { var = j_minus value = j }
		subtract_from_temp_variable = { var = j_minus value = 1 }
		while_loop_effect = {
			limit = {
				check_variable = { j > 0 }
				check_variable = { mil_idea_groups^j_minus > mil_idea_groups^j }
			}
			# swap j-1 with j if value of j-1 > j
			set_temp_variable = { var = temp value = mil_idea_groups^j }
			set_variable = { var = mil_idea_groups^j value = mil_idea_groups^j_minus }
			set_variable = { var = mil_idea_groups^j_minus value = temp }
			subtract_from_temp_variable = { var = j value = 1 }
			subtract_from_temp_variable = { var = j_minus value = 1 }
		}
	}
}

add_to_national_ideas_threshold = {
	hidden_effect = {
		subtract_from_variable = { until_next_completed_national_idea = 1 }
		if = {
			limit = {
				check_variable = { until_next_completed_national_idea < 1 }
			}
			add_to_variable = { completed_national_ideas = 1 }
			set_variable = { until_next_completed_national_idea = 3 }
			if = {
				limit = {
					is_ai = no
					NOT = { has_country_flag = disabled_ideas_window_national_idea_unlocked_alert }
					NOT = { has_country_flag = setting_historical_idea_groups }
					NOT = { check_variable = { completed_national_ideas > 7 } }
				}
				set_variable = { show_ideas_window_national_idea_unlocked_alert = 1 }
			}
		}
		calculate_progress_of_national_ideas = yes
	}
}

calculate_total_num_of_ideas = {
	set_temp_variable = { completed_national_ideas_temp = completed_national_ideas }
	multiply_temp_variable = { completed_national_ideas_temp = 3 }
	set_temp_variable = { until_next_completed_national_idea_temp = until_next_completed_national_idea }
	subtract_from_temp_variable = { until_next_completed_national_idea_temp = 3 }
	multiply_temp_variable = { until_next_completed_national_idea_temp = -1 }
	add_to_temp_variable = { completed_national_ideas_temp = until_next_completed_national_idea_temp }
}

calculate_progress_of_national_ideas = {
	calculate_total_num_of_ideas = yes
	divide_temp_variable = { completed_national_ideas_temp = 21 }
	multiply_temp_variable = { completed_national_ideas_temp = 364 }
	set_temp_variable = { national_ideas_progress = completed_national_ideas_temp }
	round_temp_variable = national_ideas_progress
	set_variable = { national_ideas_progress = national_ideas_progress }
	country_event = { id = remove_idea_group_ideas_events.3 }
}

remove_ideas_of_group = {
	country_event = { id = remove_idea_group_ideas_events.1 }
}

update_idea_cost_modifiers = {
	if = {
		limit = {
			has_game_rule = {
				rule = eu4_like_ideas_rule_idea_cost_modifier
				option = RULE_50_PP
			}
		}
		set_variable = { idea_cost_var = 50 }
	}
	else_if = {
		limit = {
			has_game_rule = {
				rule = eu4_like_ideas_rule_idea_cost_modifier
				option = RULE_150_PP
			}
		}
		set_variable = { idea_cost_var = 150 }
	}
	else_if = {
		limit = {
			has_game_rule = {
				rule = eu4_like_ideas_rule_idea_cost_modifier
				option = RULE_200_PP
			}
		}
		set_variable = { idea_cost_var = 200 }
	}
	else = {
		set_variable = { idea_cost_var = 100 }
	}
	set_temp_variable = { idea_cost_multipliers_var = 1 }
	add_to_temp_variable = { idea_cost_multipliers_var = modifier@idea_cost_modifier }
	multiply_variable = { idea_cost_var = idea_cost_multipliers_var }
	round_variable = idea_cost_var
	# Min Idea Cost
	if = {
		limit = {
			check_variable = { idea_cost_var < 20 }
		}
		set_variable = { idea_cost_var = 20 }
	}
	refresh_eu4_like_alerts = yes
}

refresh_eu4_like_alerts = {
	if = {
		limit = {
			is_ai = no
		}
		if = {
			limit = {
				can_select_any_idea = yes
				NOT = { is_in_array = { eu4_like_ideas_alerts = 1 } }
				NOT = { has_country_flag = disabled_eu4_like_ideas_alerts_1 }
				NOT = { has_country_flag = temporarily_disabled_eu4_like_ideas_alerts_1 }
			}
			add_to_array = { eu4_like_ideas_alerts = 1 }
		}
		else_if = {
			limit = {
				NOT = { can_select_any_idea = yes }
				is_in_array = { eu4_like_ideas_alerts = 1 }
			}
			remove_from_array = { eu4_like_ideas_alerts = 1 }
		}
		else_if = {
			limit = {
				NOT = { can_select_any_idea = yes }
				has_country_flag = temporarily_disabled_eu4_like_ideas_alerts_1
			}
			clr_country_flag = temporarily_disabled_eu4_like_ideas_alerts_1
		}
		if = {
			limit = {
				can_select_any_idea_group = yes
				NOT = { is_in_array = { eu4_like_ideas_alerts = 2 } }
				NOT = { has_country_flag = disabled_eu4_like_ideas_alerts_2 }
				NOT = { has_country_flag = temporarily_disabled_eu4_like_ideas_alerts_2 }
			}
			add_to_array = { eu4_like_ideas_alerts = 2 }
		}
		else_if = {
			limit = {
				NOT = { can_select_any_idea_group = yes }
				is_in_array = { eu4_like_ideas_alerts = 2 }
			}
			remove_from_array = { eu4_like_ideas_alerts = 2 }
		}
		else_if = {
			limit = {
				NOT = { can_select_any_idea_group = yes }
				has_country_flag = temporarily_disabled_eu4_like_ideas_alerts_2
			}
			clr_country_flag = temporarily_disabled_eu4_like_ideas_alerts_2
		}
		if = {
			limit = {
				can_select_any_policy = yes
				NOT = { is_in_array = { eu4_like_ideas_alerts = 3 } }
				NOT = { has_country_flag = disabled_eu4_like_ideas_alerts_3 }
				NOT = { has_country_flag = temporarily_disabled_eu4_like_ideas_alerts_3 }
			}
			add_to_array = { eu4_like_ideas_alerts = 3 }
		}
		else_if = {
			limit = {
				NOT = { can_select_any_policy = yes }
				is_in_array = { eu4_like_ideas_alerts = 3 }
			}
			remove_from_array = { eu4_like_ideas_alerts = 3 }
		}
		else_if = {
			limit = {
				NOT = { can_select_any_policy = yes }
				has_country_flag = temporarily_disabled_eu4_like_ideas_alerts_3
			}
			clr_country_flag = temporarily_disabled_eu4_like_ideas_alerts_3
		}
		if = {
			limit = {
				can_change_national_idea_group = yes
				NOT = { is_in_array = { eu4_like_ideas_alerts = 4 } }
				NOT = { has_country_flag = disabled_eu4_like_ideas_alerts_4 }
				NOT = { has_country_flag = temporarily_disabled_eu4_like_ideas_alerts_4 }
			}
			add_to_array = { eu4_like_ideas_alerts = 4 }
		}
		else_if = {
			limit = {
				NOT = { can_change_national_idea_group = yes }
				is_in_array = { eu4_like_ideas_alerts = 4 }
			}
			remove_from_array = { eu4_like_ideas_alerts = 4 }
		}
		else_if = {
			limit = {
				NOT = { can_change_national_idea_group = yes }
				has_country_flag = temporarily_disabled_eu4_like_ideas_alerts_4
			}
			clr_country_flag = temporarily_disabled_eu4_like_ideas_alerts_4
		}
	}
}

remove_flags_for_available_dismissed_alerts = {
	if = {
		limit = {
			NOT = { has_country_flag = disabled_eu4_like_ideas_alerts_1 }
			has_country_flag = temporarily_disabled_eu4_like_ideas_alerts_1
			NOT = { is_in_array = { eu4_like_ideas_alerts = 1 } }
			can_select_any_idea = yes
		}
		clr_country_flag = temporarily_disabled_eu4_like_ideas_alerts_1
	}
	if = {
		limit = {
			NOT = { has_country_flag = disabled_eu4_like_ideas_alerts_2 }
			has_country_flag = temporarily_disabled_eu4_like_ideas_alerts_2
			NOT = { is_in_array = { eu4_like_ideas_alerts = 2 } }
			can_select_any_idea_group = yes
		}
		clr_country_flag = temporarily_disabled_eu4_like_ideas_alerts_2
	}
	if = {
		limit = {
			NOT = { has_country_flag = disabled_eu4_like_ideas_alerts_3 }
			has_country_flag = temporarily_disabled_eu4_like_ideas_alerts_3
			NOT = { is_in_array = { eu4_like_ideas_alerts = 3 } }
			can_select_any_policy = yes
		}
		clr_country_flag = temporarily_disabled_eu4_like_ideas_alerts_3
	}
	if = {
		limit = {
			NOT = { has_country_flag = disabled_eu4_like_ideas_alerts_4 }
			has_country_flag = temporarily_disabled_eu4_like_ideas_alerts_4
			NOT = { is_in_array = { eu4_like_ideas_alerts = 4 } }
			can_change_national_idea_group = yes
		}
		clr_country_flag = temporarily_disabled_eu4_like_ideas_alerts_4
	}
}

# Completed Ideas:
complete_1_idea_of_group = {
	meta_effect = {
		text = {
			add_ideas = idea_group_[GROUP]_1
		}
		GROUP = "[?v]"
	}
}

complete_2_idea_of_group = {
	meta_effect = {
		text = {
			add_ideas = idea_group_[GROUP]_2
		}
		GROUP = "[?v]"
	}
}

complete_3_idea_of_group = {
	meta_effect = {
		text = {
			add_ideas = idea_group_[GROUP]_3
		}
		GROUP = "[?v]"
	}
}

complete_4_idea_of_group = {
	meta_effect = {
		text = {
			add_ideas = idea_group_[GROUP]_4
		}
		GROUP = "[?v]"
	}
}

complete_5_idea_of_group = {
	meta_effect = {
		text = {
			add_ideas = idea_group_[GROUP]_5
		}
		GROUP = "[?v]"
	}
}

complete_6_idea_of_group = {
	meta_effect = {
		text = {
			add_ideas = idea_group_[GROUP]_6
		}
		GROUP = "[?v]"
	}
}

complete_7_idea_of_group = {
	meta_effect = {
		text = {
			add_ideas = idea_group_[GROUP]_7
			add_ideas = idea_group_[GROUP]_8
		}
		GROUP = "[?v]"
	}
}

complete_national_idea_0 = {
	meta_effect = {
		text = {
			if = {
				limit = {
					NOT = { has_idea = national_ideas_[GROUP]_0 }
				}
				add_ideas = national_ideas_[GROUP]_0
			}
		}
		GROUP = "[?national_ideas_id]"
	}
}

complete_national_idea_1 = {
	meta_effect = {
		text = {
			if = {
				limit = {
					check_variable = { completed_national_ideas > 0 }
					NOT = { has_idea = national_ideas_[GROUP]_1 }
				}
				add_ideas = national_ideas_[GROUP]_1
			}
			else_if = {
				limit = {
					NOT = { check_variable = { completed_national_ideas > 0 } }
					has_idea = national_ideas_[GROUP]_1
				}
				remove_national_idea_1 = yes
			}
		}
		GROUP = "[?national_ideas_id]"
	}
}

complete_national_idea_2 = {
	meta_effect = {
		text = {
			if = {
				limit = {
					check_variable = { completed_national_ideas > 1 }
					NOT = { has_idea = national_ideas_[GROUP]_2 }
				}
				add_ideas = national_ideas_[GROUP]_2
			}
			else_if = {
				limit = {
					NOT = { check_variable = { completed_national_ideas > 1 } }
					has_idea = national_ideas_[GROUP]_2
				}
				remove_national_idea_2 = yes
			}
		}
		GROUP = "[?national_ideas_id]"
	}
}

complete_national_idea_3 = {
	meta_effect = {
		text = {
			if = {
				limit = {
					check_variable = { completed_national_ideas > 2 }
					NOT = { has_idea = national_ideas_[GROUP]_3 }
				}
				add_ideas = national_ideas_[GROUP]_3
			}
			else_if = {
				limit = {
					NOT = { check_variable = { completed_national_ideas > 2 } }
					has_idea = national_ideas_[GROUP]_3
				}
				remove_national_idea_3 = yes
			}
		}
		GROUP = "[?national_ideas_id]"
	}
}

complete_national_idea_4 = {
	meta_effect = {
		text = {
			if = {
				limit = {
					check_variable = { completed_national_ideas > 3 }
					NOT = { has_idea = national_ideas_[GROUP]_4 }
				}
				add_ideas = national_ideas_[GROUP]_4
			}
			else_if = {
				limit = {
					NOT = { check_variable = { completed_national_ideas > 3 } }
					has_idea = national_ideas_[GROUP]_4
				}
				remove_national_idea_4 = yes
			}
		}
		GROUP = "[?national_ideas_id]"
	}
}

complete_national_idea_5 = {
	meta_effect = {
		text = {
			if = {
				limit = {
					check_variable = { completed_national_ideas > 4 }
					NOT = { has_idea = national_ideas_[GROUP]_5 }
				}
				add_ideas = national_ideas_[GROUP]_5
			}
			else_if = {
				limit = {
					NOT = { check_variable = { completed_national_ideas > 4 } }
					has_idea = national_ideas_[GROUP]_5
				}
				remove_national_idea_5 = yes
			}
		}
		GROUP = "[?national_ideas_id]"
	}
}

complete_national_idea_6 = {
	meta_effect = {
		text = {
			if = {
				limit = {
					check_variable = { completed_national_ideas > 5 }
					NOT = { has_idea = national_ideas_[GROUP]_6 }
				}
				add_ideas = national_ideas_[GROUP]_6
			}
			else_if = {
				limit = {
					NOT = { check_variable = { completed_national_ideas > 5 } }
					has_idea = national_ideas_[GROUP]_6
				}
				remove_national_idea_6 = yes
			}
		}
		GROUP = "[?national_ideas_id]"
	}
}

complete_national_idea_7 = {
	meta_effect = {
		text = {
			if = {
				limit = {
					check_variable = { completed_national_ideas > 6 }
					NOT = { has_idea = national_ideas_[GROUP]_7 }
				}
				add_ideas = national_ideas_[GROUP]_7
				add_ideas = national_ideas_[GROUP]_8
			}
			else_if = {
				limit = {
					NOT = { check_variable = { completed_national_ideas > 6 } }
					has_idea = national_ideas_[GROUP]_7
				}
				remove_national_idea_7 = yes
			}
		}
		GROUP = "[?national_ideas_id]"
	}
}

remove_national_idea_0 = {
	meta_effect = {
		text = {
			if = {
				limit = {
					has_idea = national_ideas_[GROUP]_0
				}
				remove_ideas = national_ideas_[GROUP]_0
			}
		}
		GROUP = "[?national_ideas_id]"
	}
}

remove_national_idea_1 = {
	meta_effect = {
		text = {
			if = {
				limit = {
					has_idea = national_ideas_[GROUP]_1
				}
				remove_ideas = national_ideas_[GROUP]_1
			}
		}
		GROUP = "[?national_ideas_id]"
	}
}

remove_national_idea_2 = {
	meta_effect = {
		text = {
			if = {
				limit = {
					has_idea = national_ideas_[GROUP]_2
				}
				remove_ideas = national_ideas_[GROUP]_2
			}
		}
		GROUP = "[?national_ideas_id]"
	}
}

remove_national_idea_3 = {
	meta_effect = {
		text = {
			if = {
				limit = {
					has_idea = national_ideas_[GROUP]_3
				}
				remove_ideas = national_ideas_[GROUP]_3
			}
		}
		GROUP = "[?national_ideas_id]"
	}
}

remove_national_idea_4 = {
	meta_effect = {
		text = {
			if = {
				limit = {
					has_idea = national_ideas_[GROUP]_4
				}
				remove_ideas = national_ideas_[GROUP]_4
			}
		}
		GROUP = "[?national_ideas_id]"
	}
}

remove_national_idea_5 = {
	meta_effect = {
		text = {
			if = {
				limit = {
					has_idea = national_ideas_[GROUP]_5
				}
				remove_ideas = national_ideas_[GROUP]_5
			}
		}
		GROUP = "[?national_ideas_id]"
	}
}

remove_national_idea_6 = {
	meta_effect = {
		text = {
			if = {
				limit = {
					has_idea = national_ideas_[GROUP]_6
				}
				remove_ideas = national_ideas_[GROUP]_6
			}
		}
		GROUP = "[?national_ideas_id]"
	}
}

remove_national_idea_7 = {
	meta_effect = {
		text = {
			if = {
				limit = {
					has_idea = national_ideas_[GROUP]_7
				}
				remove_ideas = national_ideas_[GROUP]_7
			}
			if = {
				limit = {
					has_idea = national_ideas_[GROUP]_8
				}
				remove_ideas = national_ideas_[GROUP]_8
			}
		}
		GROUP = "[?national_ideas_id]"
	}
}

clear_national_ideas = {
	country_event = { id = remove_idea_group_ideas_events.2 }
}

copy_idea_set_from_PREV = {
	set_country_flag = selected_idea_groups_array_set
	swap_national_ideas_effect = yes
	set_variable = { completed_national_ideas = PREV.completed_national_ideas }
	set_variable = { until_next_completed_national_idea = PREV.until_next_completed_national_idea }
	calculate_progress_of_national_ideas = yes
	clear_array = selected_idea_groups
	clear_array = adm_idea_groups
	clear_array = dip_idea_groups
	clear_array = mil_idea_groups
	for_each_loop = {
		array = PREV.selected_idea_groups
		value = v
		add_to_array = { selected_idea_groups = v }
		meta_effect = {
			text = {
				set_variable = { completed_ideas_of_group_[GROUP] = PREV.completed_ideas_of_group_[GROUP] }
			}
			GROUP = "[?v]"
		}
	}
	for_each_loop = {
		array = PREV.adm_idea_groups
		value = v
		add_to_array = { adm_idea_groups = v }
	}
	for_each_loop = {
		array = PREV.dip_idea_groups
		value = v
		add_to_array = { dip_idea_groups = v }
	}
	for_each_loop = {
		array = PREV.mil_idea_groups
		value = v
		add_to_array = { mil_idea_groups = v }
	}
	if = {
		limit = {
			has_government = communism
			NOT = { is_in_array = { selected_idea_groups = 4 } }
			OR = {
				AND = {
					PREV = {
						OR = {
							has_government = democratic
							has_government = neutrality
						}
					}
					is_in_array = { selected_idea_groups = 5 }
				}
				AND = {
					PREV = {
						OR = {
							has_government = fascism
							has_government = neutrality
						}
					}
					is_in_array = { selected_idea_groups = 6 }
				}
				AND = {
					PREV = {
						has_government = neutrality
					}
					is_in_array = { selected_idea_groups = 19 }
				}
			}
		}
		if = {
			limit = {
				PREV = {
					OR = {
						has_government = democratic
						has_government = neutrality
					}
				}
				is_in_array = { selected_idea_groups = 5 }
			}
			for_each_loop = {
				array = selected_idea_groups
				index = i
				value = v
				if = {
					limit = {
						check_variable = { v = 5 }
					}
					set_variable = { selected_idea_groups^i = 4 }
				}
			}
			set_variable = { completed_ideas_of_group_4 = completed_ideas_of_group_5 }
			clear_variable = completed_ideas_of_group_5
			add_to_array = { adm_idea_groups = 5 }
			remove_from_array = { adm_idea_groups = 4 }
			sort_selectable_adm_idea_groups = yes
		}
		else_if = {
			limit = {
				PREV = {
					OR = {
						has_government = fascism
						has_government = neutrality
					}
				}
				is_in_array = { selected_idea_groups = 6 }
			}
			for_each_loop = {
				array = selected_idea_groups
				index = i
				value = v
				if = {
					limit = {
						check_variable = { v = 6 }
					}
					set_variable = { selected_idea_groups^i = 4 }
				}
			}
			set_variable = { completed_ideas_of_group_4 = completed_ideas_of_group_6 }
			clear_variable = completed_ideas_of_group_6
			add_to_array = { adm_idea_groups = 6 }
			remove_from_array = { adm_idea_groups = 4 }
			sort_selectable_adm_idea_groups = yes
		}
		else_if = {
			limit = {
				PREV = {
					has_government = neutrality
				}
				is_in_array = { selected_idea_groups = 19 }
			}
			for_each_loop = {
				array = selected_idea_groups
				index = i
				value = v
				if = {
					limit = {
						check_variable = { v = 19 }
					}
					set_variable = { selected_idea_groups^i = 4 }
				}
			}
			set_variable = { completed_ideas_of_group_4 = completed_ideas_of_group_19 }
			clear_variable = completed_ideas_of_group_19
			add_to_array = { adm_idea_groups = 19 }
			remove_from_array = { adm_idea_groups = 4 }
			sort_selectable_adm_idea_groups = yes
		}
		set_temp_variable = { completed_ideas_of_group_4_temp = completed_ideas_of_group_4 }
		add_to_temp_variable = { completed_ideas_of_group_4_temp = 1 }
		for_loop_effect = {
			start = 1
			end = completed_ideas_of_group_4_temp
			value = v
			meta_effect = {
				text = {
					add_ideas = idea_group_4_[IDEA]
				}
				IDEA = "[?v]"
			}
			if = {
				limit = {
					check_variable = { v = 7 }
				}
				add_ideas = idea_group_4_8
			}
		}
	}
	else_if = {
		limit = {
			has_government = democratic
			NOT = { is_in_array = { selected_idea_groups = 5 } }
			OR = {
				AND = {
					PREV = {
						OR = {
							has_government = communism
							has_government = neutrality
						}
					}
					is_in_array = { selected_idea_groups = 4 }
				}
				AND = {
					PREV = {
						OR = {
							has_government = fascism
							has_government = neutrality
						}
					}
					is_in_array = { selected_idea_groups = 6 }
				}
				AND = {
					PREV = {
						has_government = neutrality
					}
					is_in_array = { selected_idea_groups = 19 }
				}
			}
		}
		if = {
			limit = {
				PREV = {
					OR = {
						has_government = communism
						has_government = neutrality
					}
				}
				is_in_array = { selected_idea_groups = 4 }
			}
			for_each_loop = {
				array = selected_idea_groups
				index = i
				value = v
				if = {
					limit = {
						check_variable = { v = 4 }
					}
					set_variable = { selected_idea_groups^i = 5 }
				}
			}
			set_variable = { completed_ideas_of_group_5 = completed_ideas_of_group_4 }
			clear_variable = completed_ideas_of_group_4
			add_to_array = { adm_idea_groups = 4 }
			remove_from_array = { adm_idea_groups = 5 }
			sort_selectable_adm_idea_groups = yes
		}
		else_if = {
			limit = {
				PREV = {
					OR = {
						has_government = fascism
						has_government = neutrality
					}
				}
				is_in_array = { selected_idea_groups = 6 }
			}
			for_each_loop = {
				array = selected_idea_groups
				index = i
				value = v
				if = {
					limit = {
						check_variable = { v = 6 }
					}
					set_variable = { selected_idea_groups^i = 5 }
				}
			}
			set_variable = { completed_ideas_of_group_5 = completed_ideas_of_group_6 }
			clear_variable = completed_ideas_of_group_6
			add_to_array = { adm_idea_groups = 6 }
			remove_from_array = { adm_idea_groups = 5 }
			sort_selectable_adm_idea_groups = yes
		}
		else_if = {
			limit = {
				PREV = {
					has_government = neutrality
				}
				is_in_array = { selected_idea_groups = 19 }
			}
			for_each_loop = {
				array = selected_idea_groups
				index = i
				value = v
				if = {
					limit = {
						check_variable = { v = 19 }
					}
					set_variable = { selected_idea_groups^i = 5 }
				}
			}
			set_variable = { completed_ideas_of_group_5 = completed_ideas_of_group_19 }
			clear_variable = completed_ideas_of_group_19
			add_to_array = { adm_idea_groups = 19 }
			remove_from_array = { adm_idea_groups = 5 }
			sort_selectable_adm_idea_groups = yes
		}
		set_temp_variable = { completed_ideas_of_group_5_temp = completed_ideas_of_group_5 }
		add_to_temp_variable = { completed_ideas_of_group_5_temp = 1 }
		for_loop_effect = {
			start = 1
			end = completed_ideas_of_group_5_temp
			value = v
			meta_effect = {
				text = {
					add_ideas = idea_group_5_[IDEA]
				}
				IDEA = "[?v]"
			}
			if = {
				limit = {
					check_variable = { v = 7 }
				}
				add_ideas = idea_group_5_8
			}
		}
	}
	else_if = {
		limit = {
			has_government = fascism
			NOT = { is_in_array = { selected_idea_groups = 6 } }
			OR = {
				AND = {
					PREV = {
						OR = {
							has_government = communism
							has_government = neutrality
						}
					}
					is_in_array = { selected_idea_groups = 4 }
				}
				AND = {
					PREV = {
						OR = {
							has_government = democratic
							has_government = neutrality
						}
					}
					is_in_array = { selected_idea_groups = 5 }
				}
				AND = {
					PREV = {
						has_government = neutrality
					}
					is_in_array = { selected_idea_groups = 19 }
				}
			}
		}
		if = {
			limit = {
				PREV = {
					OR = {
						has_government = communism
						has_government = neutrality
					}
				}
				is_in_array = { selected_idea_groups = 4 }
			}
			for_each_loop = {
				array = selected_idea_groups
				index = i
				value = v
				if = {
					limit = {
						check_variable = { v = 4 }
					}
					set_variable = { selected_idea_groups^i = 6 }
				}
			}
			set_variable = { completed_ideas_of_group_6 = completed_ideas_of_group_4 }
			clear_variable = completed_ideas_of_group_4
			add_to_array = { adm_idea_groups = 4 }
			remove_from_array = { adm_idea_groups = 6 }
			sort_selectable_adm_idea_groups = yes
		}
		else_if = {
			limit = {
				PREV = {
					OR = {
						has_government = democratic
						has_government = neutrality
					}
				}
				is_in_array = { selected_idea_groups = 5 }
			}
			for_each_loop = {
				array = selected_idea_groups
				index = i
				value = v
				if = {
					limit = {
						check_variable = { v = 5 }
					}
					set_variable = { selected_idea_groups^i = 6 }
				}
			}
			set_variable = { completed_ideas_of_group_6 = completed_ideas_of_group_5 }
			clear_variable = completed_ideas_of_group_5
			add_to_array = { adm_idea_groups = 5 }
			remove_from_array = { adm_idea_groups = 6 }
			sort_selectable_adm_idea_groups = yes
		}
		else_if = {
			limit = {
				PREV = {
					has_government = neutrality
				}
				is_in_array = { selected_idea_groups = 19 }
			}
			for_each_loop = {
				array = selected_idea_groups
				index = i
				value = v
				if = {
					limit = {
						check_variable = { v = 19 }
					}
					set_variable = { selected_idea_groups^i = 6 }
				}
			}
			set_variable = { completed_ideas_of_group_6 = completed_ideas_of_group_19 }
			clear_variable = completed_ideas_of_group_19
			add_to_array = { adm_idea_groups = 19 }
			remove_from_array = { adm_idea_groups = 6 }
			sort_selectable_adm_idea_groups = yes
		}
		set_temp_variable = { completed_ideas_of_group_6_temp = completed_ideas_of_group_6 }
		add_to_temp_variable = { completed_ideas_of_group_6_temp = 1 }
		for_loop_effect = {
			start = 1
			end = completed_ideas_of_group_6_temp
			value = v
			meta_effect = {
				text = {
					add_ideas = idea_group_6_[IDEA]
				}
				IDEA = "[?v]"
			}
			if = {
				limit = {
					check_variable = { v = 7 }
				}
				add_ideas = idea_group_6_8
			}
		}
	}
	else_if = {
		limit = {
			has_government = neutrality
			NOT = { is_in_array = { selected_idea_groups = 19 } }
			OR = {
				AND = {
					PREV = {
						OR = {
							has_government = communism
							has_government = neutrality
						}
					}
					is_in_array = { selected_idea_groups = 4 }
				}
				AND = {
					PREV = {
						OR = {
							has_government = democratic
							has_government = neutrality
						}
					}
					is_in_array = { selected_idea_groups = 5 }
				}
				AND = {
					PREV = {
						OR = {
							has_government = fascism
							has_government = neutrality
						}
					}
					is_in_array = { selected_idea_groups = 6 }
				}
			}
		}
		if = {
			limit = {
				PREV = {
					OR = {
						has_government = communism
						has_government = neutrality
					}
				}
				is_in_array = { selected_idea_groups = 4 }
			}
			for_each_loop = {
				array = selected_idea_groups
				index = i
				value = v
				if = {
					limit = {
						check_variable = { v = 4 }
					}
					set_variable = { selected_idea_groups^i = 19 }
				}
			}
			set_variable = { completed_ideas_of_group_19 = completed_ideas_of_group_4 }
			clear_variable = completed_ideas_of_group_4
			add_to_array = { adm_idea_groups = 4 }
			remove_from_array = { adm_idea_groups = 19 }
			sort_selectable_adm_idea_groups = yes
		}
		else_if = {
			limit = {
				PREV = {
					OR = {
						has_government = democratic
						has_government = neutrality
					}
				}
				is_in_array = { selected_idea_groups = 5 }
			}
			for_each_loop = {
				array = selected_idea_groups
				index = i
				value = v
				if = {
					limit = {
						check_variable = { v = 5 }
					}
					set_variable = { selected_idea_groups^i = 19 }
				}
			}
			set_variable = { completed_ideas_of_group_19 = completed_ideas_of_group_5 }
			clear_variable = completed_ideas_of_group_5
			add_to_array = { adm_idea_groups = 5 }
			remove_from_array = { adm_idea_groups = 19 }
			sort_selectable_adm_idea_groups = yes
		}
		else_if = {
			limit = {
				PREV = {
					OR = {
						has_government = fascism
						has_government = neutrality
					}
				}
				is_in_array = { selected_idea_groups = 6 }
			}
			for_each_loop = {
				array = selected_idea_groups
				index = i
				value = v
				if = {
					limit = {
						check_variable = { v = 6 }
					}
					set_variable = { selected_idea_groups^i = 19 }
				}
			}
			set_variable = { completed_ideas_of_group_19 = completed_ideas_of_group_6 }
			clear_variable = completed_ideas_of_group_6
			add_to_array = { adm_idea_groups = 6 }
			remove_from_array = { adm_idea_groups = 19 }
			sort_selectable_adm_idea_groups = yes
		}
		set_temp_variable = { completed_ideas_of_group_6_temp = completed_ideas_of_group_6 }
		add_to_temp_variable = { completed_ideas_of_group_6_temp = 1 }
		for_loop_effect = {
			start = 1
			end = completed_ideas_of_group_6_temp
			value = v
			meta_effect = {
				text = {
					add_ideas = idea_group_6_[IDEA]
				}
				IDEA = "[?v]"
			}
			if = {
				limit = {
					check_variable = { v = 7 }
				}
				add_ideas = idea_group_6_8
			}
		}
	}
}

# Historical Idea Groups:
set_historical_idea_groups = {
	if = {
		limit = {
			OR = {
				is_ai = no
				AND = {
					is_ai = yes
					OR = {
						AND = {
							has_game_rule = {
								rule = eu4_like_ideas_rule_AI
								option = ENABLED
							}
							OR = {
								has_game_rule = {
									rule = eu4_like_ideas_AI_idea_usage_delay
									option = NONE
								}
								AND = {
									NOT = {
										has_game_rule = {
											rule = eu4_like_ideas_AI_idea_usage_delay
											option = NONE
										}
									}
									meta_trigger = {
										text = {
											date > [DATE]
										}
										DATE = "[?global.eu4_like_ideas_AI_idea_usage_delay.GetDateStringNoHour]"
									}
								}
							}
						}
						AND = {
							is_major = yes
							has_game_rule = {
								rule = eu4_like_ideas_rule_AI
								option = ONLY_MAJORS
							}
							OR = {
								has_game_rule = {
									rule = eu4_like_ideas_AI_idea_usage_delay
									option = NONE
								}
								AND = {
									NOT = {
										has_game_rule = {
											rule = eu4_like_ideas_AI_idea_usage_delay
											option = NONE
										}
									}
									meta_trigger = {
										text = {
											date > [DATE]
										}
										DATE = "[?global.eu4_like_ideas_AI_idea_usage_delay.GetDateStringNoHour]"
									}
								}
							}
						}
						AND = {
							is_major = no
							has_game_rule = {
								rule = eu4_like_ideas_rule_AI
								option = ONLY_MINORS
							}
							OR = {
								has_game_rule = {
									rule = eu4_like_ideas_AI_idea_usage_delay
									option = NONE
								}
								AND = {
									NOT = {
										has_game_rule = {
											rule = eu4_like_ideas_AI_idea_usage_delay
											option = NONE
										}
									}
									meta_trigger = {
										text = {
											date > [DATE]
										}
										DATE = "[?global.eu4_like_ideas_AI_idea_usage_delay.GetDateStringNoHour]"
									}
								}
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				OR = {
					has_start_date > 1937.1.1
					AND = {
						NOT = { has_start_date > 1933.1.1 }
						has_start_date > 1911.1.1
					}
					AND = {
						NOT = { has_start_date > 1910.4.30 }
						has_start_date > 1008.1.1
					}
				}
			}
			set_historical_idea_group_1 = yes
		}
		if = {
			limit = {
				OR = {
					has_start_date > 1938.1.1
					AND = {
						NOT = { has_start_date > 1933.1.1 }
						has_start_date > 1912.1.1
					}
					AND = {
						NOT = { has_start_date > 1910.4.30 }
						has_start_date > 1009.1.1
					}
				}
			}
			set_historical_idea_group_2 = yes
		}
		if = {
			limit = {
				OR = {
					has_start_date > 1939.1.1
					AND = {
						NOT = { has_start_date > 1933.1.1 }
						has_start_date > 1913.1.1
					}
					AND = {
						NOT = { has_start_date > 1910.4.30 }
						has_start_date > 1010.1.1
					}
				}
			}
			set_historical_idea_group_3 = yes
		}
		if = {
			limit = {
				OR = {
					has_start_date > 1940.1.1
					AND = {
						NOT = { has_start_date > 1933.1.1 }
						has_start_date > 1914.1.1
					}
					AND = {
						NOT = { has_start_date > 1910.4.30 }
						has_start_date > 1011.1.1
					}
				}
			}
			set_historical_idea_group_4 = yes
		}
	}
	update_idea_cost_modifiers = yes
	update_policy_costs = yes
}

set_historical_idea_group_1 = {
	if = {
		limit = {
			tag = USA
		}
		set_variable = { selected_idea_groups^0 = 1 }
		remove_from_array = { adm_idea_groups = 1 }
	}
	else_if = {
		limit = {
			tag = GER
		}
		set_variable = { selected_idea_groups^0 = 2 }
		remove_from_array = { adm_idea_groups = 2 }
	}
	else_if = {
		limit = {
			tag = ENG
		}
		set_variable = { selected_idea_groups^0 = 11 }
		remove_from_array = { dip_idea_groups = 11 }
	}
	else_if = {
		limit = {
			tag = ITA
		}
		if = {
			limit = {
				has_start_date > 1933.1.1
			}
			set_variable = { selected_idea_groups^0 = 6 }
			remove_from_array = { adm_idea_groups = 6 }
		}
		else = {
			set_variable = { selected_idea_groups^0 = 5 }
			remove_from_array = { adm_idea_groups = 5 }
		}
	}
	else_if = {
		limit = {
			tag = JAP
		}
		set_variable = { selected_idea_groups^0 = 11 }
		remove_from_array = { dip_idea_groups = 11 }
	}
	else_if = {
		limit = {
			tag = FRA
		}
		set_variable = { selected_idea_groups^0 = 5 }
		remove_from_array = { adm_idea_groups = 5 }
	}

	if = {
		limit = {
			check_variable = { selected_idea_groups^0 = 0 }
		}
		if = {
			limit = {
				amount_research_slots < 3
				NOT = { is_in_array = { selected_idea_groups = 3 } }
			}
			set_variable = { selected_idea_groups^0 = 3 }
			remove_from_array = { adm_idea_groups = 3 }
		}
		else_if = {
			limit = {
				set_temp_variable = { oil_produced_temp = resource_produced@oil }
				set_temp_variable = { rubber_produced_temp = resource_produced@rubber }
				OR = {
					AND = {
						check_variable = { oil_produced_temp < 10 }
						check_variable = { rubber_produced_temp < 50 }
					}
					AND = {
						check_variable = { oil_produced_temp < 50 }
						check_variable = { rubber_produced_temp < 10 }
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 2 } }
			}
			set_variable = { selected_idea_groups^0 = 2 }
			remove_from_array = { adm_idea_groups = 2 }
		}
		else_if = {
			limit = {
				NOT = { AI_is_set_to_become_democratic = yes }
				NOT = { AI_is_set_to_become_fascist = yes }
				NOT = { AI_is_set_to_become_neutral = yes }
				OR = {
					AND = {
						communism > 0.25
						democratic < 0.25
						fascism < 0.25
						neutrality < 0.25
					}
					has_government = communism
					AI_is_set_to_become_communist = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 4 } }
				NOT = { is_in_array = { selected_idea_groups = 5 } }
				NOT = { is_in_array = { selected_idea_groups = 6 } }
				NOT = { is_in_array = { selected_idea_groups = 19 } }
			}
			set_variable = { selected_idea_groups^0 = 4 }
			remove_from_array = { adm_idea_groups = 4 }
		}
		else_if = {
			limit = {
				NOT = { AI_is_set_to_become_communist = yes }
				NOT = { AI_is_set_to_become_fascist = yes }
				NOT = { AI_is_set_to_become_neutral = yes }
				OR = {
					AND = {
						democratic > 0.25
						communism < 0.25
						fascism < 0.25
						neutrality < 0.25
					}
					has_government = democratic
					AI_is_set_to_become_democratic = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 4 } }
				NOT = { is_in_array = { selected_idea_groups = 5 } }
				NOT = { is_in_array = { selected_idea_groups = 6 } }
				NOT = { is_in_array = { selected_idea_groups = 19 } }
			}
			set_variable = { selected_idea_groups^0 = 5 }
			remove_from_array = { adm_idea_groups = 5 }
		}
		else_if = {
			limit = {
				NOT = { AI_is_set_to_become_communist = yes }
				NOT = { AI_is_set_to_become_democratic = yes }
				NOT = { AI_is_set_to_become_neutral = yes }
				OR = {
					AND = {
						fascism > 0.25
						democratic < 0.25
						communism < 0.25
						neutrality < 0.25
					}
					has_government = fascism
					AI_is_set_to_become_fascist = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 4 } }
				NOT = { is_in_array = { selected_idea_groups = 5 } }
				NOT = { is_in_array = { selected_idea_groups = 6 } }
				NOT = { is_in_array = { selected_idea_groups = 19 } }
			}
			set_variable = { selected_idea_groups^0 = 6 }
			remove_from_array = { adm_idea_groups = 6 }
		}
		else_if = {
			limit = {
				NOT = { AI_is_set_to_become_communist = yes }
				NOT = { AI_is_set_to_become_democratic = yes }
				NOT = { AI_is_set_to_become_fascist = yes }
				OR = {
					is_neutral_monarchy = yes
					AI_is_set_to_become_fascist = yes
				}
				OR = {
					AND = {
						neutrality > 0.25
						democratic < 0.25
						communism < 0.25
						fascism < 0.25
					}
					has_government = neutrality
					AI_is_set_to_become_fascist = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 4 } }
				NOT = { is_in_array = { selected_idea_groups = 5 } }
				NOT = { is_in_array = { selected_idea_groups = 6 } }
				NOT = { is_in_array = { selected_idea_groups = 19 } }
			}
			set_variable = { selected_idea_groups^0 = 19 }
			remove_from_array = { adm_idea_groups = 19 }
		}
		else_if = {
			limit = {
				has_idea = free_trade
				NOT = { is_in_array = { selected_idea_groups = 7 } }
			}
			set_variable = { selected_idea_groups^0 = 7 }
			remove_from_array = { dip_idea_groups = 7 }
		}
		else_if = {
			limit = {
				is_in_faction = yes
				num_faction_members > 9
				OR = {
					is_major = yes
					is_faction_leader = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 8 } }
			}
			set_variable = { selected_idea_groups^0 = 8 }
			remove_from_array = { dip_idea_groups = 8 }
		}
		else_if = {
			limit = {
				is_major = yes
				NOT = { has_government = fascism }
				NOT = { is_in_array = { selected_idea_groups = 9 } }
			}
			set_variable = { selected_idea_groups^0 = 9 }
			remove_from_array = { dip_idea_groups = 9 }
		}
		else_if = {
			limit = {
				OR = {
					has_tech = mass_assault
					has_army_manpower = {
						size > 999999
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 15 } }
			}
			set_variable = { selected_idea_groups^0 = 15 }
			remove_from_array = { mil_idea_groups = 15 }
		}
		else_if = {
			limit = {
				OR = {
					has_tech = delay
					has_tech = sup_delay
				}
				NOT = { is_in_array = { selected_idea_groups = 14 } }
			}
			set_variable = { selected_idea_groups^0 = 14 }
			remove_from_array = { mil_idea_groups = 14 }
		}
		else_if = {
			limit = {
				OR = {
					has_offensive_war = yes
					has_tech = elastic_defence
					any_other_country = {
						ROOT = {
							OR = {
								is_justifying_wargoal_against = PREV
								has_wargoal_against = PREV
							}
						}
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 16 } }
				NOT = { is_in_array = { selected_idea_groups = 17 } }
			}
			set_variable = { selected_idea_groups^0 = 16 }
			remove_from_array = { mil_idea_groups = 16 }
		}
		else_if = {
			limit = {
				OR = {
					has_defensive_war = yes
					has_tech = grand_battle_plan
					any_other_country = {
						meta_trigger = {
							text = {
								strength_ratio = {
									tag = [COUNTRY]
									ratio > 1
								}
							}
							COUNTRY = "[Root.GetTag]"
						}
						OR = {
							is_justifying_wargoal_against = ROOT
							has_wargoal_against = ROOT
						}
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 16 } }
				NOT = { is_in_array = { selected_idea_groups = 17 } }
			}
			set_variable = { selected_idea_groups^0 = 17 }
			remove_from_array = { mil_idea_groups = 17 }
		}
		else_if = {
			limit = {
				has_navy_size = {
					size > 4
					type = carrier
				}
				NOT = { is_in_array = { selected_idea_groups = 20 } }
			}
			set_variable = { selected_idea_groups^0 = 20 }
			remove_from_array = { dip_idea_groups = 20 }
		}
		else_if = {
			limit = {
				has_army_size = {
					size > 14
					type = armor
				}
				NOT = { is_in_array = { selected_idea_groups = 21 } }
			}
			set_variable = { selected_idea_groups^0 = 21 }
			remove_from_array = { mil_idea_groups = 21 }
		}
		else_if = {
			limit = {
				political_power_daily < 2
				NOT = { is_in_array = { selected_idea_groups = 22 } }
			}
			set_variable = { selected_idea_groups^0 = 22 }
			remove_from_array = { adm_idea_groups = 22 }
		}
		else_if = {
			limit = {
				OR = {
					has_defensive_war = yes
					any_owned_state = {
						NOT = { is_controlled_by = ROOT }
					}
					any_country = {
						has_wargoal_against = ROOT
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 26 } }
				NOT = { is_in_array = { selected_idea_groups = 27 } }
			}
			set_variable = { selected_idea_groups^0 = 26 }
			remove_from_array = { dip_idea_groups = 26 }
		}
		else_if = {
			limit = {
				OR = {
					has_offensive_war = yes
					any_controlled_state = {
						NOT = { is_owned_by = ROOT }
					}
					any_country = {
						ROOT = { has_wargoal_against = PREV }
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 27 } }
				NOT = { is_in_array = { selected_idea_groups = 26 } }
			}
			set_variable = { selected_idea_groups^0 = 27 }
			remove_from_array = { mil_idea_groups = 27 }
		}
		else_if = {
			limit = {
				NOT = { is_in_array = { selected_idea_groups = 25 } }
			}
			set_variable = { selected_idea_groups^0 = 25 }
			remove_from_array = { adm_idea_groups = 25 }
		}
	}
}

set_historical_idea_group_2 = {
	if = {
		limit = {
			tag = USA
		}
		set_variable = { selected_idea_groups^1 = 5 }
		remove_from_array = { adm_idea_groups = 5 }
	}
	else_if = {
		limit = {
			tag = GER
		}
		if = {
			limit = {
				has_start_date > 1933.1.1
			}
			set_variable = { selected_idea_groups^1 = 12 }
			remove_from_array = { dip_idea_groups = 12 }
		}
		else = {
			set_variable = { selected_idea_groups^1 = 11 }
			remove_from_array = { dip_idea_groups = 11 }
		}
	}
	else_if = {
		limit = {
			tag = ENG
		}
		set_variable = { selected_idea_groups^1 = 5 }
		remove_from_array = { adm_idea_groups = 5 }
	}
	else_if = {
		limit = {
			tag = ITA
		}
		set_variable = { selected_idea_groups^1 = 11 }
		remove_from_array = { dip_idea_groups = 11 }
	}
	else_if = {
		limit = {
			tag = JAP
		}
		set_variable = { selected_idea_groups^1 = 2 }
		remove_from_array = { adm_idea_groups = 2 }
	}
	else_if = {
		limit = {
			tag = FRA
		}
		set_variable = { selected_idea_groups^1 = 17 }
		remove_from_array = { mil_idea_groups = 17 }
	}

	if = {
		limit = {
			check_variable = { selected_idea_groups^1 = 0 }
		}
		if = {
			limit = {
				amount_research_slots < 3
				NOT = { is_in_array = { selected_idea_groups = 3 } }
			}
			set_variable = { selected_idea_groups^1 = 3 }
			remove_from_array = { adm_idea_groups = 3 }
		}
		else_if = {
			limit = {
				set_temp_variable = { oil_produced_temp = resource_produced@oil }
				set_temp_variable = { rubber_produced_temp = resource_produced@rubber }
				OR = {
					AND = {
						check_variable = { oil_produced_temp < 10 }
						check_variable = { rubber_produced_temp < 50 }
					}
					AND = {
						check_variable = { oil_produced_temp < 50 }
						check_variable = { rubber_produced_temp < 10 }
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 2 } }
			}
			set_variable = { selected_idea_groups^1 = 2 }
			remove_from_array = { adm_idea_groups = 2 }
		}
		else_if = {
			limit = {
				NOT = { AI_is_set_to_become_democratic = yes }
				NOT = { AI_is_set_to_become_fascist = yes }
				NOT = { AI_is_set_to_become_neutral = yes }
				OR = {
					AND = {
						communism > 0.25
						democratic < 0.25
						fascism < 0.25
						neutrality < 0.25
					}
					has_government = communism
					AI_is_set_to_become_communist = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 4 } }
				NOT = { is_in_array = { selected_idea_groups = 5 } }
				NOT = { is_in_array = { selected_idea_groups = 6 } }
				NOT = { is_in_array = { selected_idea_groups = 19 } }
			}
			set_variable = { selected_idea_groups^1 = 4 }
			remove_from_array = { adm_idea_groups = 4 }
		}
		else_if = {
			limit = {
				NOT = { AI_is_set_to_become_communist = yes }
				NOT = { AI_is_set_to_become_fascist = yes }
				NOT = { AI_is_set_to_become_neutral = yes }
				OR = {
					AND = {
						democratic > 0.25
						communism < 0.25
						fascism < 0.25
						neutrality < 0.25
					}
					has_government = democratic
					AI_is_set_to_become_democratic = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 4 } }
				NOT = { is_in_array = { selected_idea_groups = 5 } }
				NOT = { is_in_array = { selected_idea_groups = 6 } }
				NOT = { is_in_array = { selected_idea_groups = 19 } }
			}
			set_variable = { selected_idea_groups^1 = 5 }
			remove_from_array = { adm_idea_groups = 5 }
		}
		else_if = {
			limit = {
				NOT = { AI_is_set_to_become_communist = yes }
				NOT = { AI_is_set_to_become_democratic = yes }
				NOT = { AI_is_set_to_become_neutral = yes }
				OR = {
					AND = {
						fascism > 0.25
						democratic < 0.25
						communism < 0.25
						neutrality < 0.25
					}
					has_government = fascism
					AI_is_set_to_become_fascist = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 4 } }
				NOT = { is_in_array = { selected_idea_groups = 5 } }
				NOT = { is_in_array = { selected_idea_groups = 6 } }
				NOT = { is_in_array = { selected_idea_groups = 19 } }
			}
			set_variable = { selected_idea_groups^1 = 6 }
			remove_from_array = { adm_idea_groups = 6 }
		}
		else_if = {
			limit = {
				NOT = { AI_is_set_to_become_communist = yes }
				NOT = { AI_is_set_to_become_democratic = yes }
				NOT = { AI_is_set_to_become_fascist = yes }
				OR = {
					is_neutral_monarchy = yes
					AI_is_set_to_become_fascist = yes
				}
				OR = {
					AND = {
						neutrality > 0.25
						democratic < 0.25
						communism < 0.25
						fascism < 0.25
					}
					has_government = neutrality
					AI_is_set_to_become_fascist = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 4 } }
				NOT = { is_in_array = { selected_idea_groups = 5 } }
				NOT = { is_in_array = { selected_idea_groups = 6 } }
				NOT = { is_in_array = { selected_idea_groups = 19 } }
			}
			set_variable = { selected_idea_groups^1 = 19 }
			remove_from_array = { adm_idea_groups = 19 }
		}
		else_if = {
			limit = {
				has_idea = free_trade
				NOT = { is_in_array = { selected_idea_groups = 7 } }
			}
			set_variable = { selected_idea_groups^1 = 7 }
			remove_from_array = { dip_idea_groups = 7 }
		}
		else_if = {
			limit = {
				is_in_faction = yes
				num_faction_members > 9
				OR = {
					is_major = yes
					is_faction_leader = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 8 } }
			}
			set_variable = { selected_idea_groups^1 = 8 }
			remove_from_array = { dip_idea_groups = 8 }
		}
		else_if = {
			limit = {
				is_major = yes
				NOT = { has_government = fascism }
				NOT = { is_in_array = { selected_idea_groups = 9 } }
			}
			set_variable = { selected_idea_groups^1 = 9 }
			remove_from_array = { dip_idea_groups = 9 }
		}
		else_if = {
			limit = {
				OR = {
					has_tech = mass_assault
					has_army_manpower = {
						size > 999999
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 15 } }
			}
			set_variable = { selected_idea_groups^1 = 15 }
			remove_from_array = { mil_idea_groups = 15 }
		}
		else_if = {
			limit = {
				OR = {
					has_tech = delay
					has_tech = sup_delay
				}
				NOT = { is_in_array = { selected_idea_groups = 14 } }
			}
			set_variable = { selected_idea_groups^1 = 14 }
			remove_from_array = { mil_idea_groups = 14 }
		}
		else_if = {
			limit = {
				OR = {
					has_offensive_war = yes
					has_tech = elastic_defence
					any_other_country = {
						ROOT = {
							OR = {
								is_justifying_wargoal_against = PREV
								has_wargoal_against = PREV
							}
						}
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 16 } }
				NOT = { is_in_array = { selected_idea_groups = 17 } }
			}
			set_variable = { selected_idea_groups^1 = 16 }
			remove_from_array = { mil_idea_groups = 16 }
		}
		else_if = {
			limit = {
				OR = {
					has_defensive_war = yes
					has_tech = grand_battle_plan
					any_other_country = {
						meta_trigger = {
							text = {
								strength_ratio = {
									tag = [COUNTRY]
									ratio > 1
								}
							}
							COUNTRY = "[Root.GetTag]"
						}
						OR = {
							is_justifying_wargoal_against = ROOT
							has_wargoal_against = ROOT
						}
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 16 } }
				NOT = { is_in_array = { selected_idea_groups = 17 } }
			}
			set_variable = { selected_idea_groups^1 = 17 }
			remove_from_array = { mil_idea_groups = 17 }
		}
		else_if = {
			limit = {
				has_navy_size = {
					size > 4
					type = carrier
				}
				NOT = { is_in_array = { selected_idea_groups = 20 } }
			}
			set_variable = { selected_idea_groups^1 = 20 }
			remove_from_array = { dip_idea_groups = 20 }
		}
		else_if = {
			limit = {
				has_army_size = {
					size > 14
					type = armor
				}
				NOT = { is_in_array = { selected_idea_groups = 21 } }
			}
			set_variable = { selected_idea_groups^1 = 21 }
			remove_from_array = { mil_idea_groups = 21 }
		}
		else_if = {
			limit = {
				political_power_daily < 2
				NOT = { is_in_array = { selected_idea_groups = 22 } }
			}
			set_variable = { selected_idea_groups^1 = 22 }
			remove_from_array = { adm_idea_groups = 22 }
		}
		else_if = {
			limit = {
				OR = {
					has_defensive_war = yes
					any_owned_state = {
						NOT = { is_controlled_by = ROOT }
					}
					any_country = {
						has_wargoal_against = ROOT
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 26 } }
				NOT = { is_in_array = { selected_idea_groups = 27 } }
			}
			set_variable = { selected_idea_groups^1 = 26 }
			remove_from_array = { dip_idea_groups = 26 }
		}
		else_if = {
			limit = {
				OR = {
					has_offensive_war = yes
					any_controlled_state = {
						NOT = { is_owned_by = ROOT }
					}
					any_country = {
						ROOT = { has_wargoal_against = PREV }
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 27 } }
				NOT = { is_in_array = { selected_idea_groups = 26 } }
			}
			set_variable = { selected_idea_groups^1 = 27 }
			remove_from_array = { mil_idea_groups = 27 }
		}
		else_if = {
			limit = {
				NOT = { is_in_array = { selected_idea_groups = 25 } }
			}
			set_variable = { selected_idea_groups^1 = 25 }
			remove_from_array = { adm_idea_groups = 25 }
		}
	}
}

set_historical_idea_group_3 = {
	if = {
		limit = {
			tag = USA
		}
		set_variable = { selected_idea_groups^2 = 9 }
		remove_from_array = { dip_idea_groups = 9 }
	}
	else_if = {
		limit = {
			tag = GER
		}
		set_variable = { selected_idea_groups^2 = 16 }
		remove_from_array = { mil_idea_groups = 16 }
	}
	else_if = {
		limit = {
			tag = ENG
		}
		set_variable = { selected_idea_groups^2 = 10 }
		remove_from_array = { dip_idea_groups = 10 }
	}
	else_if = {
		limit = {
			tag = ITA
		}
		set_variable = { selected_idea_groups^2 = 2 }
		remove_from_array = { adm_idea_groups = 2 }
	}
	else_if = {
		limit = {
			tag = JAP
		}
		if = {
			limit = {
				has_start_date > 1933.1.1
			}
			set_variable = { selected_idea_groups^2 = 6 }
			remove_from_array = { adm_idea_groups = 6 }
		}
		else = {
			set_variable = { selected_idea_groups^2 = 19 }
			remove_from_array = { adm_idea_groups = 19 }
		}
	}
	else_if = {
		limit = {
			tag = FRA
		}
		set_variable = { selected_idea_groups^2 = 7 }
		remove_from_array = { dip_idea_groups = 7 }
	}
	else_if = {
		limit = {
			tag = SOV
		}
		set_variable = { selected_idea_groups^2 = 15 }
		remove_from_array = { mil_idea_groups = 15 }
	}

	if = {
		limit = {
			check_variable = { selected_idea_groups^2 = 0 }
		}
		if = {
			limit = {
				amount_research_slots < 3
				NOT = { is_in_array = { selected_idea_groups = 3 } }
			}
			set_variable = { selected_idea_groups^2 = 3 }
			remove_from_array = { adm_idea_groups = 3 }
		}
		else_if = {
			limit = {
				set_temp_variable = { oil_produced_temp = resource_produced@oil }
				set_temp_variable = { rubber_produced_temp = resource_produced@rubber }
				OR = {
					AND = {
						check_variable = { oil_produced_temp < 10 }
						check_variable = { rubber_produced_temp < 50 }
					}
					AND = {
						check_variable = { oil_produced_temp < 50 }
						check_variable = { rubber_produced_temp < 10 }
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 2 } }
			}
			set_variable = { selected_idea_groups^2 = 2 }
			remove_from_array = { adm_idea_groups = 2 }
		}
		else_if = {
			limit = {
				NOT = { AI_is_set_to_become_democratic = yes }
				NOT = { AI_is_set_to_become_fascist = yes }
				NOT = { AI_is_set_to_become_neutral = yes }
				OR = {
					AND = {
						communism > 0.25
						democratic < 0.25
						fascism < 0.25
						neutrality < 0.25
					}
					has_government = communism
					AI_is_set_to_become_communist = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 4 } }
				NOT = { is_in_array = { selected_idea_groups = 5 } }
				NOT = { is_in_array = { selected_idea_groups = 6 } }
				NOT = { is_in_array = { selected_idea_groups = 19 } }
			}
			set_variable = { selected_idea_groups^2 = 4 }
			remove_from_array = { adm_idea_groups = 4 }
		}
		else_if = {
			limit = {
				NOT = { AI_is_set_to_become_communist = yes }
				NOT = { AI_is_set_to_become_fascist = yes }
				NOT = { AI_is_set_to_become_neutral = yes }
				OR = {
					AND = {
						democratic > 0.25
						communism < 0.25
						fascism < 0.25
						neutrality < 0.25
					}
					has_government = democratic
					AI_is_set_to_become_democratic = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 4 } }
				NOT = { is_in_array = { selected_idea_groups = 5 } }
				NOT = { is_in_array = { selected_idea_groups = 6 } }
				NOT = { is_in_array = { selected_idea_groups = 19 } }
			}
			set_variable = { selected_idea_groups^2 = 5 }
			remove_from_array = { adm_idea_groups = 5 }
		}
		else_if = {
			limit = {
				NOT = { AI_is_set_to_become_communist = yes }
				NOT = { AI_is_set_to_become_democratic = yes }
				NOT = { AI_is_set_to_become_neutral = yes }
				OR = {
					AND = {
						fascism > 0.25
						democratic < 0.25
						communism < 0.25
						neutrality < 0.25
					}
					has_government = fascism
					AI_is_set_to_become_fascist = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 4 } }
				NOT = { is_in_array = { selected_idea_groups = 5 } }
				NOT = { is_in_array = { selected_idea_groups = 6 } }
				NOT = { is_in_array = { selected_idea_groups = 19 } }
			}
			set_variable = { selected_idea_groups^2 = 6 }
			remove_from_array = { adm_idea_groups = 6 }
		}
		else_if = {
			limit = {
				NOT = { AI_is_set_to_become_communist = yes }
				NOT = { AI_is_set_to_become_democratic = yes }
				NOT = { AI_is_set_to_become_fascist = yes }
				OR = {
					is_neutral_monarchy = yes
					AI_is_set_to_become_fascist = yes
				}
				OR = {
					AND = {
						neutrality > 0.25
						democratic < 0.25
						communism < 0.25
						fascism < 0.25
					}
					has_government = neutrality
					AI_is_set_to_become_fascist = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 4 } }
				NOT = { is_in_array = { selected_idea_groups = 5 } }
				NOT = { is_in_array = { selected_idea_groups = 6 } }
				NOT = { is_in_array = { selected_idea_groups = 19 } }
			}
			set_variable = { selected_idea_groups^2 = 19 }
			remove_from_array = { adm_idea_groups = 19 }
		}
		else_if = {
			limit = {
				has_idea = free_trade
				NOT = { is_in_array = { selected_idea_groups = 7 } }
			}
			set_variable = { selected_idea_groups^2 = 7 }
			remove_from_array = { dip_idea_groups = 7 }
		}
		else_if = {
			limit = {
				is_in_faction = yes
				num_faction_members > 9
				OR = {
					is_major = yes
					is_faction_leader = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 8 } }
			}
			set_variable = { selected_idea_groups^2 = 8 }
			remove_from_array = { dip_idea_groups = 8 }
		}
		else_if = {
			limit = {
				is_major = yes
				NOT = { has_government = fascism }
				NOT = { is_in_array = { selected_idea_groups = 9 } }
			}
			set_variable = { selected_idea_groups^2 = 9 }
			remove_from_array = { dip_idea_groups = 9 }
		}
		else_if = {
			limit = {
				OR = {
					has_tech = mass_assault
					has_army_manpower = {
						size > 999999
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 15 } }
			}
			set_variable = { selected_idea_groups^2 = 15 }
			remove_from_array = { mil_idea_groups = 15 }
		}
		else_if = {
			limit = {
				OR = {
					has_tech = delay
					has_tech = sup_delay
				}
				NOT = { is_in_array = { selected_idea_groups = 14 } }
			}
			set_variable = { selected_idea_groups^2 = 14 }
			remove_from_array = { mil_idea_groups = 14 }
		}
		else_if = {
			limit = {
				OR = {
					has_offensive_war = yes
					has_tech = elastic_defence
					any_other_country = {
						ROOT = {
							OR = {
								is_justifying_wargoal_against = PREV
								has_wargoal_against = PREV
							}
						}
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 16 } }
				NOT = { is_in_array = { selected_idea_groups = 17 } }
			}
			set_variable = { selected_idea_groups^2 = 16 }
			remove_from_array = { mil_idea_groups = 16 }
		}
		else_if = {
			limit = {
				NOT = { tag = ROM }
				OR = {
					has_defensive_war = yes
					has_tech = grand_battle_plan
					any_other_country = {
						meta_trigger = {
							text = {
								strength_ratio = {
									tag = [COUNTRY]
									ratio > 1
								}
							}
							COUNTRY = "[Root.GetTag]"
						}
						OR = {
							is_justifying_wargoal_against = ROOT
							has_wargoal_against = ROOT
						}
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 16 } }
				NOT = { is_in_array = { selected_idea_groups = 17 } }
			}
			set_variable = { selected_idea_groups^2 = 17 }
			remove_from_array = { mil_idea_groups = 17 }
		}
		else_if = {
			limit = {
				has_navy_size = {
					size > 4
					type = carrier
				}
				NOT = { is_in_array = { selected_idea_groups = 20 } }
			}
			set_variable = { selected_idea_groups^2 = 20 }
			remove_from_array = { dip_idea_groups = 20 }
		}
		else_if = {
			limit = {
				has_army_size = {
					size > 14
					type = armor
				}
				NOT = { is_in_array = { selected_idea_groups = 21 } }
			}
			set_variable = { selected_idea_groups^2 = 21 }
			remove_from_array = { mil_idea_groups = 21 }
		}
		else_if = {
			limit = {
				political_power_daily < 2
				NOT = { is_in_array = { selected_idea_groups = 22 } }
			}
			set_variable = { selected_idea_groups^2 = 22 }
			remove_from_array = { adm_idea_groups = 22 }
		}
		else_if = {
			limit = {
				OR = {
					has_defensive_war = yes
					any_owned_state = {
						NOT = { is_controlled_by = ROOT }
					}
					any_country = {
						has_wargoal_against = ROOT
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 26 } }
				NOT = { is_in_array = { selected_idea_groups = 27 } }
			}
			set_variable = { selected_idea_groups^2 = 26 }
			remove_from_array = { dip_idea_groups = 26 }
		}
		else_if = {
			limit = {
				OR = {
					has_offensive_war = yes
					any_controlled_state = {
						NOT = { is_owned_by = ROOT }
					}
					any_country = {
						ROOT = { has_wargoal_against = PREV }
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 27 } }
				NOT = { is_in_array = { selected_idea_groups = 26 } }
			}
			set_variable = { selected_idea_groups^2 = 27 }
			remove_from_array = { mil_idea_groups = 27 }
		}
		else_if = {
			limit = {
				NOT = { is_in_array = { selected_idea_groups = 25 } }
			}
			set_variable = { selected_idea_groups^2 = 25 }
			remove_from_array = { adm_idea_groups = 25 }
		}
	}
}

set_historical_idea_group_4 = {
	if = {
		limit = {
			check_variable = { selected_idea_groups^3 = 0 }
		}
		if = {
			limit = {
				amount_research_slots < 3
				NOT = { is_in_array = { selected_idea_groups = 3 } }
			}
			set_variable = { selected_idea_groups^3 = 3 }
			remove_from_array = { adm_idea_groups = 3 }
		}
		else_if = {
			limit = {
				set_temp_variable = { oil_produced_temp = resource_produced@oil }
				set_temp_variable = { rubber_produced_temp = resource_produced@rubber }
				OR = {
					AND = {
						check_variable = { oil_produced_temp < 10 }
						check_variable = { rubber_produced_temp < 50 }
					}
					AND = {
						check_variable = { oil_produced_temp < 50 }
						check_variable = { rubber_produced_temp < 10 }
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 2 } }
			}
			set_variable = { selected_idea_groups^3 = 2 }
			remove_from_array = { adm_idea_groups = 2 }
		}
		else_if = {
			limit = {
				NOT = { AI_is_set_to_become_democratic = yes }
				NOT = { AI_is_set_to_become_fascist = yes }
				NOT = { AI_is_set_to_become_neutral = yes }
				OR = {
					AND = {
						communism > 0.25
						democratic < 0.25
						fascism < 0.25
						neutrality < 0.25
					}
					has_government = communism
					AI_is_set_to_become_communist = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 4 } }
				NOT = { is_in_array = { selected_idea_groups = 5 } }
				NOT = { is_in_array = { selected_idea_groups = 6 } }
				NOT = { is_in_array = { selected_idea_groups = 19 } }
			}
			set_variable = { selected_idea_groups^3 = 4 }
			remove_from_array = { adm_idea_groups = 4 }
		}
		else_if = {
			limit = {
				NOT = { AI_is_set_to_become_communist = yes }
				NOT = { AI_is_set_to_become_fascist = yes }
				NOT = { AI_is_set_to_become_neutral = yes }
				OR = {
					AND = {
						democratic > 0.25
						communism < 0.25
						fascism < 0.25
						neutrality < 0.25
					}
					has_government = democratic
					AI_is_set_to_become_democratic = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 4 } }
				NOT = { is_in_array = { selected_idea_groups = 5 } }
				NOT = { is_in_array = { selected_idea_groups = 6 } }
				NOT = { is_in_array = { selected_idea_groups = 19 } }
			}
			set_variable = { selected_idea_groups^3 = 5 }
			remove_from_array = { adm_idea_groups = 5 }
		}
		else_if = {
			limit = {
				NOT = { AI_is_set_to_become_communist = yes }
				NOT = { AI_is_set_to_become_democratic = yes }
				NOT = { AI_is_set_to_become_neutral = yes }
				OR = {
					AND = {
						fascism > 0.25
						democratic < 0.25
						communism < 0.25
						neutrality < 0.25
					}
					has_government = fascism
					AI_is_set_to_become_fascist = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 4 } }
				NOT = { is_in_array = { selected_idea_groups = 5 } }
				NOT = { is_in_array = { selected_idea_groups = 6 } }
				NOT = { is_in_array = { selected_idea_groups = 19 } }
			}
			set_variable = { selected_idea_groups^3 = 6 }
			remove_from_array = { adm_idea_groups = 6 }
		}
		else_if = {
			limit = {
				NOT = { AI_is_set_to_become_communist = yes }
				NOT = { AI_is_set_to_become_democratic = yes }
				NOT = { AI_is_set_to_become_fascist = yes }
				OR = {
					is_neutral_monarchy = yes
					AI_is_set_to_become_fascist = yes
				}
				OR = {
					AND = {
						neutrality > 0.25
						democratic < 0.25
						communism < 0.25
						fascism < 0.25
					}
					has_government = neutrality
					AI_is_set_to_become_fascist = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 4 } }
				NOT = { is_in_array = { selected_idea_groups = 5 } }
				NOT = { is_in_array = { selected_idea_groups = 6 } }
				NOT = { is_in_array = { selected_idea_groups = 19 } }
			}
			set_variable = { selected_idea_groups^3 = 19 }
			remove_from_array = { adm_idea_groups = 19 }
		}
		else_if = {
			limit = {
				has_idea = free_trade
				NOT = { is_in_array = { selected_idea_groups = 7 } }
			}
			set_variable = { selected_idea_groups^3 = 7 }
			remove_from_array = { dip_idea_groups = 7 }
		}
		else_if = {
			limit = {
				is_in_faction = yes
				num_faction_members > 9
				OR = {
					is_major = yes
					is_faction_leader = yes
				}
				NOT = { is_in_array = { selected_idea_groups = 8 } }
			}
			set_variable = { selected_idea_groups^3 = 8 }
			remove_from_array = { dip_idea_groups = 8 }
		}
		else_if = {
			limit = {
				is_major = yes
				NOT = { has_government = fascism }
				NOT = { is_in_array = { selected_idea_groups = 9 } }
			}
			set_variable = { selected_idea_groups^3 = 9 }
			remove_from_array = { dip_idea_groups = 9 }
		}
		else_if = {
			limit = {
				OR = {
					has_tech = mass_assault
					has_army_manpower = {
						size > 999999
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 15 } }
			}
			set_variable = { selected_idea_groups^3 = 15 }
			remove_from_array = { mil_idea_groups = 15 }
		}
		else_if = {
			limit = {
				OR = {
					has_tech = delay
					has_tech = sup_delay
				}
				NOT = { is_in_array = { selected_idea_groups = 14 } }
			}
			set_variable = { selected_idea_groups^3 = 14 }
			remove_from_array = { mil_idea_groups = 14 }
		}
		else_if = {
			limit = {
				OR = {
					has_offensive_war = yes
					has_tech = elastic_defence
					any_other_country = {
						ROOT = {
							OR = {
								is_justifying_wargoal_against = PREV
								has_wargoal_against = PREV
							}
						}
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 16 } }
				NOT = { is_in_array = { selected_idea_groups = 17 } }
			}
			set_variable = { selected_idea_groups^3 = 16 }
			remove_from_array = { mil_idea_groups = 16 }
		}
		else_if = {
			limit = {
				OR = {
					has_defensive_war = yes
					has_tech = grand_battle_plan
					any_other_country = {
						meta_trigger = {
							text = {
								strength_ratio = {
									tag = [COUNTRY]
									ratio > 1
								}
							}
							COUNTRY = "[Root.GetTag]"
						}
						OR = {
							is_justifying_wargoal_against = ROOT
							has_wargoal_against = ROOT
						}
					}
				}
				NOT = { is_in_array = { selected_idea_groups = 16 } }
				NOT = { is_in_array = { selected_idea_groups = 17 } }
			}
			set_variable = { selected_idea_groups^3 = 17 }
			remove_from_array = { mil_idea_groups = 17 }
		}
		else_if = {
			limit = {
				has_navy_size = {
					size > 4
					type = carrier
				}
				NOT = { is_in_array = { selected_idea_groups = 20 } }
			}
			set_variable = { selected_idea_groups^3 = 20 }
			remove_from_array = { dip_idea_groups = 20 }
		}
		else_if = {
			limit = {
				has_army_size = {
					size > 14
					type = armor
				}
				NOT = { is_in_array = { selected_idea_groups = 21 } }
			}
			set_variable = { selected_idea_groups^3 = 21 }
			remove_from_array = { mil_idea_groups = 21 }
		}
		else_if = {
			limit = {
				NOT = { is_in_array = { selected_idea_groups = 22 } }
			}
			set_variable = { selected_idea_groups^3 = 22 }
			remove_from_array = { adm_idea_groups = 22 }
		}
	}
}

add_random_amount_of_ideas = {
	set_country_flag = setting_historical_idea_groups
	if = {
		limit = {
			NOT = { check_variable = { selected_idea_groups^0 = 0 } }
		}
		random_list = {
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 0 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 1 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 2 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 3 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 4 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 5 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 6 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 7 }
			}
		}
		add_to_temp_variable = { random_amount_of_ideas = 1 }
		for_loop_effect = {
			start = 1
			end = random_amount_of_ideas
			value = j
			meta_effect = {
				text = {
					add_to_variable = { completed_ideas_of_group_[GROUP] = 1 }
					add_ideas = idea_group_[GROUP]_[IDEA]
				}
				GROUP = "[?selected_idea_groups^0]"
				IDEA = "[?j]"
			}
			add_to_national_ideas_threshold = yes
			update_idea_cost_modifiers = yes
			update_policy_costs = yes
		}
	}
	if = {
		limit = {
			NOT = { check_variable = { selected_idea_groups^1 = 0 } }
		}
		random_list = {
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 0 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 1 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 2 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 3 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 4 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 5 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 6 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 7 }
			}
		}
		add_to_temp_variable = { random_amount_of_ideas = 1 }
		for_loop_effect = {
			start = 1
			end = random_amount_of_ideas
			value = j
			meta_effect = {
				text = {
					add_to_variable = { completed_ideas_of_group_[GROUP] = 1 }
					add_ideas = idea_group_[GROUP]_[IDEA]
				}
				GROUP = "[?selected_idea_groups^1]"
				IDEA = "[?j]"
			}
			add_to_national_ideas_threshold = yes
			update_idea_cost_modifiers = yes
			update_policy_costs = yes
		}
	}
	if = {
		limit = {
			NOT = { check_variable = { selected_idea_groups^2 = 0 } }
		}
		random_list = {
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 0 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 1 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 2 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 3 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 4 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 5 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 6 }
			}
			12.5 = {
				set_temp_variable = { random_amount_of_ideas = 7 }
			}
		}
		add_to_temp_variable = { random_amount_of_ideas = 1 }
		for_loop_effect = {
			start = 1
			end = random_amount_of_ideas
			value = j
			meta_effect = {
				text = {
					add_to_variable = { completed_ideas_of_group_[GROUP] = 1 }
					add_ideas = idea_group_[GROUP]_[IDEA]
				}
				GROUP = "[?selected_idea_groups^2]"
				IDEA = "[?j]"
			}
			add_to_national_ideas_threshold = yes
			update_idea_cost_modifiers = yes
			update_policy_costs = yes
		}
	}
	clr_country_flag = setting_historical_idea_groups
}

set_AI_pp_cost_reduction = {
	if = {
		limit = {
			has_game_rule = {
				rule = eu4_like_ideas_rule_AI_pp_cost_reduction
				option = NONE
			}
		}
		clear_variable = global.eu4_like_ideas_AI_pp_cost_reduction_var
	}
	else_if = {
		limit = {
			has_game_rule = {
				rule = eu4_like_ideas_rule_AI_pp_cost_reduction
				option = RULE_5_PERCENT
			}
		}
		set_variable = { global.eu4_like_ideas_AI_pp_cost_reduction_var = 5 }
	}
	else_if = {
		limit = {
			has_game_rule = {
				rule = eu4_like_ideas_rule_AI_pp_cost_reduction
				option = RULE_10_PERCENT
			}
		}
		set_variable = { global.eu4_like_ideas_AI_pp_cost_reduction_var = 10 }
	}
	else_if = {
		limit = {
			has_game_rule = {
				rule = eu4_like_ideas_rule_AI_pp_cost_reduction
				option = RULE_15_PERCENT
			}
		}
		set_variable = { global.eu4_like_ideas_AI_pp_cost_reduction_var = 15 }
	}
	else_if = {
		limit = {
			has_game_rule = {
				rule = eu4_like_ideas_rule_AI_pp_cost_reduction
				option = RULE_20_PERCENT
			}
		}
		set_variable = { global.eu4_like_ideas_AI_pp_cost_reduction_var = 20 }
	}
	else_if = {
		limit = {
			has_game_rule = {
				rule = eu4_like_ideas_rule_AI_pp_cost_reduction
				option = RULE_25_PERCENT
			}
		}
		set_variable = { global.eu4_like_ideas_AI_pp_cost_reduction_var = 25 }
	}
	else_if = {
		limit = {
			has_game_rule = {
				rule = eu4_like_ideas_rule_AI_pp_cost_reduction
				option = RULE_30_PERCENT
			}
		}
		set_variable = { global.eu4_like_ideas_AI_pp_cost_reduction_var = 30 }
	}
	else_if = {
		limit = {
			has_game_rule = {
				rule = eu4_like_ideas_rule_AI_pp_cost_reduction
				option = RULE_35_PERCENT
			}
		}
		set_variable = { global.eu4_like_ideas_AI_pp_cost_reduction_var = 35 }
	}
	else_if = {
		limit = {
			has_game_rule = {
				rule = eu4_like_ideas_rule_AI_pp_cost_reduction
				option = RULE_40_PERCENT
			}
		}
		set_variable = { global.eu4_like_ideas_AI_pp_cost_reduction_var = 40 }
	}
	else_if = {
		limit = {
			has_game_rule = {
				rule = eu4_like_ideas_rule_AI_pp_cost_reduction
				option = RULE_45_PERCENT
			}
		}
		set_variable = { global.eu4_like_ideas_AI_pp_cost_reduction_var = 45 }
	}
	else_if = {
		limit = {
			has_game_rule = {
				rule = eu4_like_ideas_rule_AI_pp_cost_reduction
				option = RULE_50_PERCENT
			}
		}
		set_variable = { global.eu4_like_ideas_AI_pp_cost_reduction_var = 50 }
	}
	every_country = {
		set_AI_pp_cost_reduction_modifier = yes
	}
}

set_AI_pp_cost_reduction_modifier = {
	if = {
		limit = {
			has_idea = eu4_like_ideas_AI_pp_cost_reduction_5
		}
		remove_ideas = eu4_like_ideas_AI_pp_cost_reduction_5
	}
	if = {
		limit = {
			has_idea = eu4_like_ideas_AI_pp_cost_reduction_10
		}
		remove_ideas = eu4_like_ideas_AI_pp_cost_reduction_10
	}
	if = {
		limit = {
			has_idea = eu4_like_ideas_AI_pp_cost_reduction_15
		}
		remove_ideas = eu4_like_ideas_AI_pp_cost_reduction_15
	}
	if = {
		limit = {
			has_idea = eu4_like_ideas_AI_pp_cost_reduction_20
		}
		remove_ideas = eu4_like_ideas_AI_pp_cost_reduction_20
	}
	if = {
		limit = {
			has_idea = eu4_like_ideas_AI_pp_cost_reduction_25
		}
		remove_ideas = eu4_like_ideas_AI_pp_cost_reduction_25
	}
	if = {
		limit = {
			has_idea = eu4_like_ideas_AI_pp_cost_reduction_30
		}
		remove_ideas = eu4_like_ideas_AI_pp_cost_reduction_30
	}
	if = {
		limit = {
			has_idea = eu4_like_ideas_AI_pp_cost_reduction_35
		}
		remove_ideas = eu4_like_ideas_AI_pp_cost_reduction_35
	}
	if = {
		limit = {
			has_idea = eu4_like_ideas_AI_pp_cost_reduction_40
		}
		remove_ideas = eu4_like_ideas_AI_pp_cost_reduction_40
	}
	if = {
		limit = {
			has_idea = eu4_like_ideas_AI_pp_cost_reduction_45
		}
		remove_ideas = eu4_like_ideas_AI_pp_cost_reduction_45
	}
	if = {
		limit = {
			has_idea = eu4_like_ideas_AI_pp_cost_reduction_50
		}
		remove_ideas = eu4_like_ideas_AI_pp_cost_reduction_50
	}
	if = {
		limit = {
			is_ai = yes
			has_variable = global.eu4_like_ideas_AI_pp_cost_reduction_var
		}
		meta_effect = {
			text = {
				add_ideas = eu4_like_ideas_AI_pp_cost_reduction_[LEVEL]
			}
			LEVEL = "[?global.eu4_like_ideas_AI_pp_cost_reduction_var]"
		}
	}
}

set_eu4_like_ideas_AI_idea_usage_delay = {
	if = {
		limit = {
			NOT = {
				has_game_rule = {
					rule = eu4_like_ideas_AI_idea_usage_delay
					option = NONE
				}
			}
		}
		set_temp_variable = { temp = 8.76 }
		set_variable = { global.eu4_like_ideas_AI_idea_usage_delay = global.date }
		if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_AI_idea_usage_delay
					option = RULE_DELAY_1_YEAR
				}
			}
			multiply_temp_variable = { temp = 1 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_AI_idea_usage_delay
					option = RULE_DELAY_2_YEAR
				}
			}
			multiply_temp_variable = { temp = 2 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_AI_idea_usage_delay
					option = RULE_DELAY_3_YEAR
				}
			}
			multiply_temp_variable = { temp = 3 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_AI_idea_usage_delay
					option = RULE_DELAY_4_YEAR
				}
			}
			multiply_temp_variable = { temp = 4 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_AI_idea_usage_delay
					option = RULE_DELAY_5_YEAR
				}
			}
			multiply_temp_variable = { temp = 5 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_AI_idea_usage_delay
					option = RULE_DELAY_6_YEAR
				}
			}
			multiply_temp_variable = { temp = 6 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_AI_idea_usage_delay
					option = RULE_DELAY_7_YEAR
				}
			}
			multiply_temp_variable = { temp = 7 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_AI_idea_usage_delay
					option = RULE_DELAY_8_YEAR
				}
			}
			multiply_temp_variable = { temp = 8 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_AI_idea_usage_delay
					option = RULE_DELAY_9_YEAR
				}
			}
			multiply_temp_variable = { temp = 9 }
		}
		else_if = {
			limit = {
				has_game_rule = {
					rule = eu4_like_ideas_AI_idea_usage_delay
					option = RULE_DELAY_10_YEAR
				}
			}
			multiply_temp_variable = { temp = 10 }
		}
		else = {
			multiply_temp_variable = { temp = 0 }
		}
		add_to_variable = { global.eu4_like_ideas_AI_idea_usage_delay = temp }
	}
}

select_idea_group_effect = {
	if = {
		limit = {
			check_variable = { selected_idea_groups^0 = 0 }
		}
		set_temp_variable = { temp = 0 }
	}
	else_if = {
		limit = {
			check_variable = { selected_idea_groups^1 = 0 }
		}
		set_temp_variable = { temp = 1 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_4
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_6
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_8
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_10
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_12
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_14
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_16
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^2 = 0 }
		}
		set_temp_variable = { temp = 2 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_4
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_6
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_8
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_10
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_12
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_14
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_16
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^3 = 0 }
		}
		set_temp_variable = { temp = 3 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_6
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_8
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_10
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_12
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_14
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_16
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^4 = 0 }
		}
		set_temp_variable = { temp = 4 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_6
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_8
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_10
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_12
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_14
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_16
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^5 = 0 }
		}
		set_temp_variable = { temp = 5 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_8
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_10
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_12
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_14
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_16
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^6 = 0 }
		}
		set_temp_variable = { temp = 6 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_8
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_10
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_12
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_14
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_16
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^7 = 0 }
		}
		set_temp_variable = { temp = 7 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_10
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_12
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_14
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_16
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^8 = 0 }
		}
		set_temp_variable = { temp = 8 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_10
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_12
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_14
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_16
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^9 = 0 }
		}
		set_temp_variable = { temp = 9 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_12
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_14
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_16
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^10 = 0 }
		}
		set_temp_variable = { temp = 10 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_12
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_14
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_16
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^11 = 0 }
		}
		set_temp_variable = { temp = 11 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_14
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_16
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^12 = 0 }
		}
		set_temp_variable = { temp = 12 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_14
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_16
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^13 = 0 }
		}
		set_temp_variable = { temp = 13 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_16
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^14 = 0 }
		}
		set_temp_variable = { temp = 14 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_16
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^15 = 0 }
		}
		set_temp_variable = { temp = 15 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^16 = 0 }
		}
		set_temp_variable = { temp = 16 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_18
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^17 = 0 }
		}
		set_temp_variable = { temp = 17 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^18 = 0 }
		}
		set_temp_variable = { temp = 18 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_20
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^19 = 0 }
		}
		set_temp_variable = { temp = 19 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^20 = 0 }
		}
		set_temp_variable = { temp = 20 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_22
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^21 = 0 }
		}
		set_temp_variable = { temp = 21 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^22 = 0 }
		}
		set_temp_variable = { temp = 22 }
	}
	else_if = {
		limit = {
			OR = {
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_24
				}
				has_game_rule = {
					rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
					option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
				}
			}
			check_variable = { selected_idea_groups^23 = 0 }
		}
		set_temp_variable = { temp = 23 }
	}
	else_if = {
		limit = {
			has_game_rule = {
				rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
				option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
			}
			check_variable = { selected_idea_groups^24 = 0 }
		}
		set_temp_variable = { temp = 24 }
	}
	else_if = {
		limit = {
			has_game_rule = {
				rule = eu4_like_ideas_num_of_selectable_idea_groups_rule
				option = EU4_LIKE_IDEAS_NUM_OF_SELECTABLE_IDEA_GROUPS_RULE_26
			}
			check_variable = { selected_idea_groups^25 = 0 }
		}
		set_temp_variable = { temp = 25 }
	}

	set_variable = { selected_idea_groups^temp = v }
	if = {
		limit = {
			is_in_array = { adm_idea_groups = v }
		}
		remove_from_array = { adm_idea_groups = v }
	}
	else_if = {
		limit = {
			is_in_array = { dip_idea_groups = v }
		}
		remove_from_array = { dip_idea_groups = v }
	}
	else_if = {
		limit = {
			is_in_array = { mil_idea_groups = v }
		}
		remove_from_array = { mil_idea_groups = v }
	}
	set_variable = { show_ideas_window = 1 }
	clear_variable = show_selectable_idea_groups_window
	add_to_variable = { num_of_selected_idea_groups = 1 }
	update_idea_cost_modifiers = yes
	update_policy_costs = yes
}

remove_idea_group_effect = {
	calculate_total_num_of_ideas = yes
	remove_ideas_of_group = yes
	meta_effect = {
		text = {
			subtract_from_temp_variable = { completed_national_ideas_temp = completed_ideas_of_group_[GROUP] }
			set_temp_variable = { pp_regain = completed_ideas_of_group_[GROUP] }
			clear_variable = completed_ideas_of_group_[GROUP]
		}
		GROUP = "[?v]"
	}
	set_temp_variable = { halfed_idea_cost_temp = idea_cost_var }
	divide_temp_variable = { halfed_idea_cost_temp = 2 }
	round_temp_variable = halfed_idea_cost_temp
	multiply_temp_variable = { pp_regain = halfed_idea_cost_temp }
	add_political_power = pp_regain
	set_variable = { completed_national_ideas = 0 }
	while_loop_effect = {
		limit = {
			check_variable = { completed_national_ideas_temp > 2 }
		}
		subtract_from_temp_variable = { completed_national_ideas_temp = 3 }
		add_to_variable = { completed_national_ideas = 1 }
	}
	set_variable = { until_next_completed_national_idea = completed_national_ideas_temp }
	subtract_from_variable = { until_next_completed_national_idea = 3 }
	if = {
		limit = {
			check_variable = { until_next_completed_national_idea < -3 }
		}
		set_variable = { until_next_completed_national_idea = -3 }
	}
	multiply_variable = { until_next_completed_national_idea = -1 }
	calculate_progress_of_national_ideas = yes
	if = {
		limit = {
			OR = {
				check_variable = { v = 1 }
				check_variable = { v = 2 }
				check_variable = { v = 3 }
				check_variable = { v = 4 }
				check_variable = { v = 5 }
				check_variable = { v = 6 }
				check_variable = { v = 19 }
				check_variable = { v = 22 }
				check_variable = { v = 25 }
			}
		}
		add_to_array = { adm_idea_groups = v }
		sort_selectable_adm_idea_groups = yes
	}
	else_if = {
		limit = {
			OR = {
				check_variable = { v = 7 }
				check_variable = { v = 8 }
				check_variable = { v = 9 }
				check_variable = { v = 10 }
				check_variable = { v = 11 }
				check_variable = { v = 12 }
				check_variable = { v = 20 }
				check_variable = { v = 23 }
				check_variable = { v = 26 }
			}
		}
		add_to_array = { dip_idea_groups = v }
		sort_selectable_dip_idea_groups = yes
	}
	else = {
		add_to_array = { mil_idea_groups = v }
		sort_selectable_mil_idea_groups = yes
	}
	remove_from_array = { selected_idea_groups = v }
	add_to_array = { selected_idea_groups = 0 }
	subtract_from_variable = { num_of_selected_idea_groups = 1 }
	update_idea_cost_modifiers = yes
	update_policy_costs = yes
	check_and_perhaps_remove_current_policies_effect = yes
}